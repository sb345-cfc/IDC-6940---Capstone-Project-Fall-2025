---
title: "Data Cleaning"
---

This section describes the detailed data-cleaning steps performed to prepare the stroke dataset for machine-learning modeling. Proper data cleaning ensures accuracy, prevents data leakage, and improves model stability — especially for rare outcomes such as stroke.

---

## 1. Removing Non-Predictive Identifiers

The dataset included an ID column that does not contribute to prediction.  
It was removed to prevent noise in the model:

```r
stroke <- stroke %>% select(-id)

##2. Converting Variables to Appropriate Data Types

The dataset contains multiple categorical variables that must be treated as factors in R to ensure correct modeling.
stroke <- stroke %>%
  mutate(
    gender = factor(gender),
    ever_married = factor(ever_married),
    work_type = factor(work_type),
    residence_type = factor(residence_type),
    smoking_status = factor(smoking_status),
    hypertension = factor(hypertension),
    heart_disease = factor(heart_disease),
    stroke = factor(stroke, levels = c(0, 1),
                    labels = c("No", "Yes"))
  )

### 3. Handling Rare Categories

The gender variable contained one instance labeled "Other":

table(stroke$gender)

Output initially:
Female   Male   Other
 2994    2115      1
 
To avoid model instability, the “Other” case was merged into the “Male” category:

stroke$gender[stroke$gender == "Other"] <- "Male"
stroke$gender <- droplevels(stroke$gender)

Updated:
Female   Male
 2994    2116

4. Cleaning and Imputing BMI Values

The BMI column contained missing entries and irregular values such as "N/A".

4.1 Convert invalid entries to NA
stroke$bmi[stroke$bmi == "N/A"] <- NA
stroke$bmi <- as.numeric(stroke$bmi)

4.2 Impute missing values using median
median_bmi <- median(stroke$bmi, na.rm = TRUE)
stroke$bmi[is.na(stroke$bmi)] <- median_bmi

4.3 Summary of cleaned BMI
summary(stroke$bmi)

Expected output:
Min. 1st Qu.  Median  Mean 3rd Qu. Max.
10.3  23.8    28.1   28.9   32.8    97.6

Interpretation

- BMI ranges from 10.3 to 97.6

- Median BMI ≈ 28.1 (overweight category)

- Mean slightly above median → slight right skew

- Indicates presence of high-BMI outliers

5. Final Missing-Value Check
After cleaning all variables:

sapply(stroke, function(x) sum(is.na(x)))

Expected result:
gender              0
age                 0
hypertension        0
heart_disease       0
ever_married        0
work_type           0
residence_type      0
avg_glucose_level   0
bmi                 0
smoking_status      0
stroke              0


No missing values remain in the dataset.

6. Class Imbalance Verification

Stroke is a rare event (~5%), which must be accounted for in model evaluation.

prop.table(table(stroke$stroke))

Expected output:
No    Yes
0.951 0.049

Confirms high class imbalance, which affects sensitivity and ROC behavior.

Summary

After data cleaning:

- All categorical variables were converted to factors

- Non-predictive ID field removed

- Gender rare category fixed

- BMI cleaned, converted, and median-imputed

- No missing data remained

- Class imbalance confirmed (~95% No Stroke / 5% Stroke)

This cleaned dataset is now ready for reliable model development.


